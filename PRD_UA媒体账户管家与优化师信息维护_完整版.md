## 🎯 一、产品概述

### 1.1 产品背景

随着UA（User Acquisition）自动化流程的逐步增多，传统的媒体账户和优化师信息管理方式已无法满足业务需求：

**现状问题**：
- **时效性差**：AM需手动通知中台开发更新数据库，流程冗长
- **透明度低**：信息更新状态不透明，缺乏实时反馈
- **数据滞后**：人员流动导致账户信息更新不及时
- **维护复杂**：多平台账户信息分散，缺乏统一管理


### 1.2 产品目标

**核心目标**：
- 创建自动化界面，统一管理投放账户、媒体主体与优化师信息
- 实现信息自动化同步，提升工作效率
- 建立完善的权限控制体系和操作审计机制
- 支持批量操作、数据同步与备份恢复


### 1.3 目标用户

| 角色 | 职责 | 权限 |
|------|------|------|
| **AM (Account Manager)** | 账户信息录入、更新、申请刷新 | 编辑、查看、申请 |
| **中台开发** | 接收更新通知、执行数据同步 | 系统管理、数据同步 |

---

## 🏗️ 二、系统架构

### 2.1 模块架构

```
UA媒体账户管家系统
├── 媒体信息管理 (Media Management)
│   ├── 媒体账户列表
│   ├── Google子MCC管理
│   ├── 筛选器与搜索
│   └── 刷新申请功能
├── 优化师管理 (Optimizer Management)
│   ├── 优化师信息展示
│   ├── 媒体权限管理
│   ├── 部门权限控制
│   └── 高级筛选系统
├── 产品组管理 (Product Group Management)
│   ├── 业务信息管理
│   └── 通知配置管理
└── 操作日志 (Operation Logs)
    ├── 操作记录查看
    ├── 详情展开功能
    └── 审计追溯

```

---

## 📊 三、需求分析

### 3.1 业务需求

**3.1.1 核心业务流程**
- **媒体账户管理流程**：从FG自动同步账户信息 → AM补全关键配置/Google Ads子MCC → 维护部门权限 → 定期更新状态
- **优化师管理流程**：从HBG同步人员列表/基本信息 → AM配置媒体权限 → 维护培训邮箱 → 状态管理
- **产品组配置流程**：AM维护业务信息 → 维护通知规则

**3.1.2 关键业务场景**
- **新账户接入**：自动同步后需要人工补全Payment Profile ID、分账模式等关键信息
- **人员变动**：优化师入职/离职时需要及时更新权限和状态
- **媒体权限配置**：配置优化师新媒体权限
- **产品组信息维护**：维护产品组相关业务信息、各项目通知人

---

## 🚀 四、功能模块详细设计

### 4.1 媒体信息管理模块

#### 4.1.1 核心功能

**主要功能**：
- 媒体账户信息展示与管理
- Google Ads主子MCC关系管理
- 多维度筛选与搜索
- 申请刷新功能

**页面布局**：
```
┌─────────────────────────────────────────┐
│  媒体信息管理                 [申请刷新]   │
├─────────────────────────────────────────┤
│  筛选器区域                              │
│  [状态] [媒体类型] [部门] [搜索框]        │
│  [筛选] [重置]                          │
├─────────────────────────────────────────┤
│              媒体账户列表                 │
│  ┌─────────────────────────────────────┐ │
│  │ Google Ads 主MCC (蓝色边框)         │ │
│  │   ├── 子MCC 1                      │ │
│  │   └── 子MCC 2                      │ │
│  ├─────────────────────────────────────┤ │
│  │ Facebook账户                        │ │
│  │ TikTok账户                          │ │
│  │ 其他平台账户...                      │ │
│  └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

#### 4.1.2 权限控制矩阵

| 平台类型 | 账户信息(名称/ID) | 部门 | 状态 | 账户配置 | FG信息(DHID/ENV) |
|---------|------------------|------|------|----------|-------------------|
| **Google主MCC** | ❌ 不可编辑 | ❌ 由子账户决定 | ❌ 不可编辑 | ✅ 仅Payment Profile ID | ❌ 完全只读 |
| **Google子MCC** | ✅ 可编辑 | ✅ 可编辑 | ✅ 可编辑 | ❌ 继承主MCC | ❌ 完全只读 |
| **TikTok BC** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ✅ 分账模式可编辑 | ❌ 完全只读 |
| **Facebook** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ❌ 显示"-" | ❌ 完全只读 |
| **Unity** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ❌ 显示"-" | ❌ 完全只读 |
| **AppLovin** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ❌ 显示"-" | ❌ 完全只读 |
| **Moloco** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ❌ 显示"-" | ❌ 完全只读 |

#### 4.1.3 Google主MCC管理功能

**功能设计**：
- **字段位置**：Google主MCC的"账户配置"列
- **编辑权限**：仅Payment Profile ID可编辑
- **数据类型**：文本输入框
- **特殊限制**：MCC Type为只读，固定显示"主MCC"

**界面交互**：
- **非编辑模式**：显示MCC类型徽章和Payment Profile ID
- **编辑模式**：Payment Profile ID输入框，MCC Type保持只读
- **保存逻辑**：更新Payment Profile ID，子MCC自动继承新值，实时更新lastUpdated时间

**业务规则**：
- **数据来源**：主MCC账户信息来源于FG接口
- **状态同步**：每日与FG自动同步；若FG侧删除某主MCC，将其状态改为`Closed`
- **继承机制**：子MCC自动继承主MCC的Payment Profile ID
- **必填性**：Payment Profile ID为必填项

#### 4.1.4 Google子MCC管理功能

**功能设计**：
- **触发方式**：Google主MCC行的"添加子MCC"按钮
- **对话框功能**：
  - 显示主MCC信息，包含名称、ID（只读）
  - 子MCC名称输入（必填）
  - 子MCC账户ID输入（必填）
  - 部门选择（多选，必填）
  - 数据继承（Payment Profile ID、DHID、Environment自动继承）

**界面交互**：
- **非编辑模式**：子MCC名称、ID、状态、部门均可编辑
- **编辑模式**：名称、账户ID、状态、部门可修改，配置信息继承主MCC
- **保存逻辑**：实时更新子MCC信息，同步更新主MCC的部门合集，实时更新lastUpdated时间

**业务规则**：
- **数据来源**：子MCC账户仅可人工添加
- **继承规则**：Payment Profile ID、DHID、Environment从主MCC继承
- **部门聚合**：主MCC部门为所有子MCC部门的合集
- **状态管理**：子MCC可独立设置Active/Closed状态；

**交互流程**：
1. 点击主MCC的"添加子MCC"按钮
2. 弹出添加子MCC对话框
3. 填写子MCC基本信息
4. 选择部门（多选）
5. 确认提交
6. 新子MCC显示在主MCC下方

#### 4.1.5 TikTok分账模式管理

**功能设计**：
- **字段位置**：TikTok账户的"账户配置"列
- **编辑权限**：仅编辑模式下可修改
- **数据类型**：下拉单选
- **选项值**：
  - `ACCOUNT`
  - `ADVERTISER`

**界面交互**：
- **非编辑模式**：显示当前分账模式值，支持搜索高亮
- **编辑模式**：下拉选择器，默认选中当前值
- **保存逻辑**：与其他字段一起保存，实时更新lastUpdated时间

**业务规则**：
- **默认值**：默认为空
- **必填性**：分账模式为必选项，在第一次设置过后不可为空

#### 4.1.6 通用账户部门管理

**功能设计**：
- **适用范围**：Google子MCC、TikTok BC、Facebook、Unity、AppLovin、Moloco
- **编辑权限**：除Google主MCC外，其他账户类型均可编辑部门
- **数据类型**：多选复选框
- **选项值**：010、045、055、060、075、089、919、041、042、035

**界面交互**：
- **非编辑模式**：显示部门标签
- **编辑模式**：多选复选框
- **保存逻辑**：更新账户部门列表，Google主MCC自动聚合子账户部门，实时更新lastUpdated时间

**业务规则**：
- **默认值**：全不选
- **Google特殊规则**：主MCC部门由子MCC部门合集决定，不可直接编辑

#### 4.1.7 FG信息管理

**功能设计**：
- **适用范围**：所有账户类型
- **编辑权限**：完全只读，不可编辑
- **数据类型**：结构化显示
- **字段包含**：DHID、Environment

**界面交互**：
- **显示方式**：结构化信息卡片，包含DHID和Environment
- **编辑限制**：所有FG信息字段均为只读
- **搜索支持**：DHID和Environment支持搜索高亮
- **继承显示**：Google子MCC显示继承来源

**业务规则**：
- **数据来源**：每日从FG同步，前端不可修改
- **继承规则**：Google子MCC的FG信息从主MCC继承
- **显示逻辑**：仅用于信息展示和搜索定位

#### 4.1.8 非Google账户状态管理

**功能设计**：
- **适用范围**：TikTok BC、Facebook、Unity、AppLovin、Moloco
- **编辑权限**：仅查看，不可编辑
- **数据类型**：状态徽章
- **状态值**：Active、Closed

**界面交互**：
- **显示方式**：彩色状态徽章（绿色Active/红色Closed）
- **编辑限制**：状态字段为只读，不提供编辑功能
- **搜索支持**：支持按状态筛选

**业务规则**：
- **数据来源**：账户信息来源于FG接口
- **状态同步**：每日与FG自动同步；若FG侧删除某账户，将其状态改为`Closed`
- **显示逻辑**：仅展示，不允许前端修改



#### 4.1.9 筛选器系统

**筛选器类型**：

1. **状态筛选**：
   - 类型：单选下拉
   - 选项：全部、Active、Closed

2. **媒体类型筛选**：
   - 类型：多选下拉
   - 选项：Facebook、Google Ads、TikTok、AppLovin、Unity、Moloco

3. **部门筛选**：
   - 类型：多选下拉
   - 选项：010、045、055、060、075、089、919、041、042、035

4. **综合搜索**：
   - 搜索范围：账户名称、账户ID、公司名称、Payment Profile ID、MCC类型、Industry ID、Business Type、Billing Group ID、DHID、Environment（除其他筛选器控制的字段外，全部字段）
   - 高亮显示：黄色背景标识匹配关键词
   - 特殊逻辑：主MCC ID或名称精准匹配时，展示所有子账户；子MCC任意信息满足筛选条件时，展示其主MCC

**筛选交互流程**：
1. **输入阶段**：用户选择条件，不立即应用
2. **手动触发**：点击"筛选"按钮应用所有条件
3. **状态反馈**：显示当前生效的筛选条件标签
4. **重置功能**：一键清空所有筛选条件

#### 4.1.10 申请刷新功能

**功能设计**：
- **触发方式**：媒体信息管理界面右上角"申请刷新"按钮
- **弹窗结构**：刷新类型选择 + 刷新对象配置 + 提交按钮
- **数据类型**：表单对话框
- **刷新类型**：账户管家、Facebook BM Client账户

**界面交互**：
- **刷新类型选择**：下拉单选，默认无选择
- **刷新对象配置**：
  - 账户管家：自动显示"全部"，不可修改
  - Facebook BM Client：可搜索下拉菜单，显示BM名称+BMID
- **提交逻辑**：提交成功后显示确认消息，记录操作日志

**业务规则**：
- **必选性**：刷新类型为必选，Facebook BM Client需选择具体对象
- **数据来源**：账户管家信息、FG信息从FG获取；Facebook BM列表从媒体接口获取
- **成功提示**："提交成功 刷新请求已成功提交"
- **界面限制**：仅在媒体信息管理界面显示，其他界面不显示

**交互流程**：
1. 用户点击"申请刷新"按钮
2. 弹出刷新申请对话框
3. 选择刷新类型
4. 配置刷新对象（如适用）
5. 点击提交按钮
6. 系统验证并提交请求
7. 显示请求成功消息
8. 记录操作日志

#### 4.1.11 刷新记录功能

**功能设计**：
- **触发方式**：媒体信息管理界面右上角"刷新记录"按钮
- **界面结构**：模态弹窗，以表格形式展示历史刷新申请记录
- **数据展示**：申请ID、申请人、申请类型、提交时间、更新时间、状态
- **交互方式**：表格行可展开查看详细执行结果

**记录结构**：
- **基本信息**：申请ID、申请人邮箱、刷新类型、刷新对象、提交时间、更新时间
- **执行状态**：执行中、成功、失败
- **执行结果**：
  - 账户管家：新增账户列表、减少账户列表、未变更数量
  - Facebook BM Client账户：新增Client账户列表、减少Client账户列表、未变更数量
- **其他信息**：执行时长、错误信息（失败时）

**表格功能**：
- **列结构**：
  1. **申请ID**：唯一标识符（如RF001）
  2. **申请人**：申请人邮箱
  3. **申请类型**：账户管家、Facebook BM Client账户
  4. **提交时间**：支持排序功能
  5. **更新时间**：支持排序功能
  6. **状态**：执行状态标识
  7. **操作**：详情/收起按钮

**筛选与排序**：
- **申请类型筛选**：位于"申请类型"列头，点击下拉箭头展开筛选菜单，支持全部类型、账户管家、Facebook BM Client账户
- **时间排序**：提交时间和更新时间列支持升序/降序排序
- **排序交互**：点击列头切换排序方向，显示排序图标
- **筛选状态**：当前筛选类型以蓝色标签显示在列头下方
- **筛选统计**：实时显示当前筛选条件下的记录总数，提供"清除筛选"按钮

**界面交互**：
- **表格视图**：固定表头，支持垂直滚动
- **详情展开**：点击操作列的"详情"按钮展开详细信息
- **展开内容**：在当前行下方显示详细信息，包含申请详情和执行结果
- **筛选下拉菜单**：
  - 点击"申请类型"列头的下拉箭头展开筛选菜单
  - 下拉箭头有旋转动画效果（展开时旋转180度）
  - 菜单选项支持悬停高亮效果
  - 当前选中项以蓝色背景标识
  - 点击菜单外部或选择选项后自动关闭
  - 筛选生效时在列头下方显示蓝色标签
- **状态显示**：
  - 执行中：蓝色标识，动画效果
  - 成功：绿色标识，展示变更统计
  - 失败：红色标识，显示错误信息
- **结果展示**：
  - 新增项：绿色背景标识
  - 减少项：红色背景标识
  - 未变更：灰色背景标识

**业务规则**：
- **数据来源**：从刷新执行系统获取记录
- **默认排序**：按提交时间倒序排列
- **权限控制**：所有用户可查看，但仅显示自己的申请记录（管理员可查看全部）
- **数据保留**：记录保留30天
- **ID规则**：申请ID格式为RF + 3位数字

**交互流程**：
1. 用户点击"刷新记录"按钮
2. 弹出刷新记录表格对话框
3. 默认显示按提交时间倒序的申请记录
4. 用户可通过筛选器过滤申请类型
5. 用户可点击时间列头进行排序
6. 点击"详情"按钮展开查看执行结果
7. 关闭对话框返回主界面

### 4.2 优化师管理模块

#### 4.2.1 核心功能

**主要功能**：
- 优化师基本信息展示（只读模式）
- 媒体权限管理（可编辑）
- 培训平台邮箱编辑
- 状态管理
- 高级筛选系统

#### 4.2.2 优化师基本信息管理

**功能设计**：
- **显示字段**：Slack姓名、邮箱、组织部门、权限部门
- **编辑权限**：所有基本信息均为只读，不可编辑
- **数据展示**：卡片式信息展示
- **搜索支持**：支持Slack姓名和邮箱的搜索高亮

**界面交互**：
- **非编辑模式**：显示Slack姓名（蓝色链接样式）和邮箱
- **组织部门**：展示优化师物理部门，使用标签显示
- **权限部门**：展示优化师在HBG拥有优化师相关权限的部门，标签数组显示

**业务规则**：
- **数据来源**：来自于HBG拥有优化师相关权限的用户信息
- **部门显示**：组织部门单个，权限部门可为多个
- **状态同步**：每日从HBG获取增量；已有优化师不会被删除或自动改变状态

#### 4.2.3 培训平台邮箱管理

**功能设计**：
- **字段位置**：优化师信息表格的"培训平台邮箱"列
- **编辑权限**：可编辑
- **数据类型**：邮箱输入框
- **默认值逻辑**：默认使用优化师邮箱

**界面交互**：
- **非编辑模式**：显示培训平台邮箱
- **编辑模式**：邮箱输入框，带placeholder"培训平台邮箱"
- **保存逻辑**：与媒体权限、状态一起保存，实时更新lastUpdated时间

**业务规则**：
- **自动填充**：编辑时若培训邮箱为空，自动填入优化师邮箱
- **格式验证**：邮箱格式验证

#### 4.2.4 优化师状态管理

**功能设计**：
- **字段位置**：优化师信息表格的"状态"列
- **编辑权限**：可编辑
- **数据类型**：下拉单选
- **状态值**：Active、Closed

**界面交互**：
- **非编辑模式**：彩色状态徽章（绿色Active/红色Closed）
- **编辑模式**：下拉选择器，包含Active和Closed选项
- **保存逻辑**：与其他字段一起保存，实时更新lastUpdated时间

**业务规则**：
- **默认状态**：新优化师默认为Active状态
- **状态同步**：不自动更新，仅手动修改

#### 4.2.5 媒体权限管理

**功能设计**：
- **权限结构**：平台、账户管家、媒体邮箱、Facebook用户ID
- **编辑权限**：完全可编辑，支持增删改
- **显示模式**：折叠式布局设计
- **批量操作**：支持添加、删除多个权限

**界面交互**：
- **非编辑模式**：
  - 折叠头部显示"媒体权限 (数量)"和平台Logo预览
  - 展开后按平台分组显示详细权限信息
  - 支持搜索关键词高亮和自动展开
- **编辑模式**：
  - 显示"编辑媒体权限"标题和"+ 添加权限"按钮
  - 每个权限显示为独立卡片，包含删除按钮
  - 各字段使用下拉选择器和输入框

**权限字段详细设计**：

**4.2.5.1 平台选择**
- **数据类型**：下拉单选
- **选项值**：Google Ads、Facebook、TikTok、AppLovin、Unity、Moloco
- **交互逻辑**：选择平台后清空账户管家选择
- **必填性**：必选项

**4.2.5.2 账户管家选择**
- **数据类型**：下拉单选，可搜索
- **数据来源**：从媒体信息页面获取对应平台账户，排除Google主MCC
- **筛选规则**：仅显示与优化师权限部门有交集的账户
- **显示格式**：账户名称
- **依赖关系**：依赖平台选择，平台变更时重置

**4.2.5.3 媒体邮箱**
- **数据类型**：邮箱输入框
- **验证规则**：邮箱格式验证
- **必填性**：必填项
- **placeholder**："邮箱地址"

**4.2.5.4 Facebook用户ID**
- **数据类型**：文本输入框
- **显示条件**：仅当平台为Facebook时显示
- **必填性**：必填项
- **placeholder**："用户ID"

**业务规则**：
- **权限继承**：新添加权限时，账户管家根据部门权限筛选
- **数据验证**：保存时验证必填字段和邮箱格式
- **删除确认**：删除权限时需二次确认
- **保存逻辑**：与其他字段统一保存，更新lastUpdated时间

#### 4.2.6 筛选器系统

**筛选器配置**：

1. **媒体类型筛选**：
   - **类型**：多选下拉
   - **选项**：Google Ads、Facebook、TikTok、AppLovin、Unity、Moloco
   - **筛选逻辑**：显示包含选中媒体类型权限的优化师

2. **状态筛选**：
   - **类型**：单选下拉
   - **选项**：全部、Active、Closed
   - **筛选逻辑**：精确匹配优化师状态

3. **组织部门筛选**：
   - **类型**：多选下拉
   - **选项**：010、045、055、060、075、089、919、041、042、035
   - **筛选逻辑**：OR逻辑

4. **权限部门筛选**：
   - **类型**：多选下拉
   - **选项**：010、045、055、060、075、089、919、041、042、035
   - **筛选逻辑**：OR逻辑

5. **综合搜索**：
   - **搜索范围**：Slack名称、内部邮箱、账户管家、媒体邮箱、用户ID（Facebook）、培训平台邮箱（除其他筛选器控制的字段外，全部字段）
   - **高亮显示**：黄色背景标识匹配关键词
   - **自动展开**：搜索匹配媒体权限折叠内容时自动展开权限详情
   - **placeholder**："搜索优化师信息、账户管家、邮箱..."

**筛选交互流程**：
1. **输入阶段**：用户选择条件，不立即应用
2. **手动触发**：点击"筛选"按钮应用所有条件
3. **状态反馈**：显示当前生效的筛选条件标签
4. **重置功能**：一键清空所有筛选条件

**特殊功能**：
- **权限计数**：媒体类型筛选时显示"媒体权限 (过滤数/总数)"
- **搜索展开**：搜索结果包含媒体权限内容时自动展开对应优化师的权限卡片

### 4.3 产品组管理模块

#### 4.3.1 模块概述

**功能定位**：管理各产品组的业务信息和通知配置
**产品组范围**：
- **业务信息管理**：F10、F45、F55、F60、F75、F89、F919、F41、F42、F35（固定10个）
- **通知管理**：F10、F45、F55、F60、F75、F89、F919、F41、F42、F35、UGC（固定11个）

#### 4.3.2 业务信息管理

**功能特性**：
- **产品组展示**：固定显示，不可修改
- **平台配置**：Facebook、Google、TikTok
- **编辑模式**：行内编辑，支持保存/取消

**字段配置**：

| 平台 | 字段 | 类型 | 编辑权限 | 说明 |
|------|------|------|----------|------|
| Facebook | 时区配置 | 时区对象数组 | ✅ 可编辑 | 支持多个时区，每个时区包含代码和地理名称 |
| Google | 时区配置 | 时区对象数组 | ✅ 可编辑 | 支持多个时区，每个时区包含代码和地理名称 |
| TikTok | Promotion Link | 文本输入 | ✅ 可编辑 | TikTok推广链接 |
| TikTok | Industry ID | 文本输入 | ✅ 可编辑 | TikTok行业ID |
| TikTok | 时区配置 | 时区对象数组 | ✅ 可编辑 | 支持多个时区，每个时区包含代码和地理名称 |

**编辑功能**：
- **分离式编辑**：时区代码和地理名称分为两个独立输入框
- **动态管理**：支持添加、删除时区配对
- **界面布局**：
  - 非编辑模式：显示卡片式时区信息
  - 编辑模式：双列网格布局（时区代码 | 地理名称）
  - 操作按钮：添加时区、删除时区

#### 4.3.3 通知管理

**设计特点**：
- **三段式布局**：左固定（产品组）+ 中间滚动（信息列）+ 右固定（操作）
- **角色管理**：增长负责人列定义角色，其他列可引用
- **列级编辑**：支持批量设置整列
- **单元格编辑**：支持单个单元格编辑

**字段配置**：

| 字段名称 | 类型 | 编辑模式 | 角色支持 | 列编辑按钮 |
|----------|------|----------|----------|------------|
| 审批AM | 多选 | 追加模式 | ❌ 不支持角色 | ❌ 无 |
| 增长负责人 | 多选 | 角色定义 | ❌ 角色来源 | ❌ 无 |
| 开户申请审批人 | 单选 | 覆盖模式 | ✅ 列级编辑支持 | ✅ 有 |
| 权限申请审批人 | 单选 | 覆盖模式 | ✅ 列级编辑支持 | ✅ 有 |
| 余额不足通知人 | 多选 | 追加模式 | ✅ 列级编辑支持 | ✅ 有 |
| 余额不足通知频道 | 单选 | 手动输入 | ❌ 不支持角色 | ❌ 无 |

**列编辑逻辑**：
- **单选列**：通过列编辑选择"增长负责人"会为每一行使用各自产品组的增长负责人邮箱
- **多选列**：通过列编辑可为每一行添加各自产品组的所有增长负责人邮箱，支持追加/删除
- **默认状态**：列编辑对话框默认不勾选"添加本组增长负责人"，需要用户主动选择

### 4.4 操作日志模块

#### 4.4.1 日志记录范围

**模块覆盖**：
- 媒体信息：媒体账户、平台配置相关操作
- 优化师管理：优化师信息、权限管理相关操作  
- 产品组管理：业务信息、通知配置相关操作

**操作类型**：
- 新增：创建新的对象或配置
- 修改：更新现有对象或配置
- 删除：移除对象或配置

**记录结构**：
1. **时间**：操作发生的具体时间（YYYY-MM-DD HH:mm）
2. **用户**：操作者邮箱
3. **模块**：操作发生的界面模块
4. **操作**：具体的操作类型
5. **对象**：被操作的具体对象名称
6. **属性**：操作的具体属性字段
7. **原值**：操作前的原始值
8. **新值**：操作后的新值

**对象属性**：

**媒体账户**：
- Google主MCC：Payment Profile ID
- Google子MCC：账户名称、账户ID、部门、状态
- TikTok BC：部门、分账模式
- Facebook：部门
- Unity：部门
- AppLovin：部门
- Moloco：部门

**优化师**：
- 基本信息：培训平台邮箱、状态
- 媒体权限：【媒体平台】权限

**产品组**：
- 业务信息：【媒体平台】时区配置、TikTok推广链接、TikTok行业ID
- 通知配置：【产品组】审批AM、【产品组】增长负责人、【产品组】开户申请审批人、【产品组】权限申请审批人、【产品组】余额不足通知人、【产品组】余额不足通知频道、列



#### 4.4.2 筛选功能

**筛选器配置**：
1. **模块筛选**：单选下拉（所有模块、媒体信息、优化师管理、产品组管理）
2. **操作类型筛选**：单选下拉（所有操作、新增、修改、删除）
3. **开始日期筛选**：日期选择器，筛选指定日期之后的操作记录
4. **结束日期筛选**：日期选择器，筛选指定日期之前的操作记录
5. **操作人筛选**：关键词搜索框，仅搜索操作用户邮箱字段

**筛选器布局**：
- 筛选器操作：重置筛选、确认筛选按钮
- 实时记录统计：显示当前筛选条件下的记录总数

**筛选逻辑**：
- 开始日期和结束日期可独立使用，支持仅设置其中一个
- 结束日期包含全天时间（23:59:59）
- 操作人搜索为模糊匹配，不区分大小写
- 多个筛选条件之间为AND关系

#### 4.4.3 展示功能

**基础展示**：
- **时间显示**：YYYY-MM-DD HH:mm格式
- **用户信息**：用户邮箱
- **模块标识**：标签显示
- **操作类型**：标签显示
- **对象信息**：具体对象名称（如F35、张三@email.com、Google主MCC账户）
- **属性信息**：具体操作属性（如余额不足通知人、状态、权限）
- **原值显示**：操作前的原始值，红色背景标识
- **新值显示**：操作后的新值，绿色背景标识

### 4.5 自动更新字段补全提醒机制

#### 4.5.1 提醒背景

系统中存在部分对象通过自动同步机制从外部系统（FG、HBG等）更新，这些对象在初次同步时，某些关键业务字段天然处于未填写状态，需要人工补全。为避免业务中断，需建立定期提醒机制。

#### 4.5.2 需要提醒的字段

**4.4.2.1 Google主MCC - Payment Profile ID**
- **数据来源**：FG接口自动同步
- **初始状态**：新同步的主MCC账户，Payment Profile ID为空
- **业务影响**：子MCC无法继承支付配置，影响计费和权限管理

**4.4.2.2 TikTok BC - 分账模式**
- **数据来源**：FG接口自动同步
- **初始状态**：新同步的TikTok BC账户，分账模式为空
- **业务影响**：计费模式不明确，影响新建账户的结算

**4.4.2.3 优化师 - 媒体权限**
- **数据来源**：HBG接口自动同步优化师基本信息
- **初始状态**：新同步的优化师，媒体权限列表为空
- **业务影响**：优化师无法开展投放工作，影响业务正常运行

#### 4.5.3 提醒机制设计

**4.4.3.1 提醒触发条件**

| 字段类型 | 触发条件 | 提醒频次 |
|---------|---------|---------|
| **Google主MCC Payment Profile ID** | 数据更新后字段为空 | 与数据更新频次一致 |
| **TikTok分账模式** | 数据更新后字段为空 | 与数据更新频次一致 |
| **优化师媒体权限** | 数据更新后字段为空 | 与数据更新频次一致 |

---

