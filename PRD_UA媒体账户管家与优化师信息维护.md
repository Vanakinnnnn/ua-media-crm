# UA媒体账户管家与优化师信息维护 PRD

---

##角色定位

你是一个经验丰富的UI设计工程师和前端开发者，擅长创建简洁、功能强大的CRM系统。现在，你需要开发一个在公司内部管理各个媒体平台广告投放账户的平台。需要维护各个主账户信息、负责投放的优化师的信息，以及记录操作日志等，详细需求描述如下。也请随着我们的交流，随时更新这篇PRD。


## 一、产品背景与目标

随着UA自动化流程逐步增多，当前媒体账户和优化师信息依赖人工维护，AM需手动通知中台开发更新数据库，存在时效性差、透明度低、人员流动导致数据滞后等问题。涉及媒体包括Unity、Applovin、TikTok、Facebook、Google Ads等。

**目标**：
- 在HBG创建一个自动化界面，统一管理投放账户、媒体主体与优化师的信息，实现信息自动化同步。
- 提升信息更新的便捷性和工作效率，减少离线数据带来的中台数据滞后信息断层。
- 支持批量导入、权限映射、日志追溯、数据同步与备份。

---

## 二、用户角色
- **AM**：负责信息录入、更新、提交刷新申请。
- **中台**：接收数据更新通知，执行数据同步。
- **管理员**：可追溯操作日志，管理权限。

---

## 三、产品结构与页面导航

1. 媒体账户管理
   - 媒体账户列表页
   - 新增/编辑媒体账户弹窗
   - Google子MCC管理对话框
2. 账户权限管理
   - 权限矩阵页面
   - 权限审计页面
3. 优化师信息管理
   - 优化师列表页
   - 新增/编辑优化师弹窗
4. 操作日志
   - 日志列表页
5. 全局操作
   - 顶部导航栏（页面切换、刷新、退出登录等）

---

## 四、功能模块与页面说明

### 1. 媒体账户管理

#### 1.1 媒体账户列表页
- 展示所有媒体账户的关键信息（媒体类型、主账户ID、部门、状态、上次更新时间等）
- 支持多条件筛选（媒体类型、部门、状态等）
- 支持关键字搜索（账户名、ID等）
- 支持分页浏览
- 支持“新增媒体账户”按钮，弹出新增表单
- 每行支持“编辑”操作，弹出编辑表单
- 支持“申请刷新”操作，触发数据同步

**字段说明**：
- 媒体类型（下拉选择：Google Ads、Facebook、TikTok、Unity、Applovin、Moloco等）
- 主账户名/ID（必填，唯一性校验）
- 部门（多选标签，支持自定义）
- 账户配置（如MCC类型、Payment profile ID等，按媒体类型动态展示）
- 状态（自动/手动维护，active/closed）
- 上次信息更新时间（系统自动记录）

| 媒体         | 包含信息                                 | 编辑权限                                    |
| ------------ | ---------------------------------------- | ---------------------------------------- |
| Google Ads   | MCC类型（主/子MCC)、Payment profile ID | 主MCC仅可编辑Payment Profile ID；子MCC不可编辑配置 |
| Facebook     | 显示"-"（无配置项）                                     | 无配置项可编辑                                          |
| Tiktok       | Industry ID、Business Type、Billing Group ID | BC账户可编辑所有配置项        |
| Applovin     | 显示"-"（无配置项）                                     | 无配置项可编辑                                          |
| Unity        | 显示"-"（无配置项）                                     | 无配置项可编辑                                          |
| Moloco       | 显示"-"（无配置项）                                     | 无配置项可编辑                                          |

- FG信息：DH ID、环境（完全只读，不可编辑）
- 状态、上次信息更新时间

**交互细节**：
- 新增/编辑弹窗内字段有必填校验，主账户ID唯一性校验
- “申请刷新”后，页面有loading提示，刷新结果有toast反馈
- FG信息（DHID、Environment）在所有平台均为只读状态，不可编辑
- 编辑权限严格按照平台类型和账户级别控制（详见1.2编辑权限控制章节）

#### 1.3 新增/编辑媒体账户弹窗
- 支持新增和编辑媒体账户信息
- 动态展示不同媒体类型下的专属字段
- 支持部门多选、标签输入
- 支持配置账户信息（如Google Ads的主/子MCC、Payment profile ID等）

**校验规则**：
- 必填项未填写时，禁止提交
- 主账户ID不可重复
- 配置字段按媒体类型校验格式

#### 1.2 媒体账户编辑权限控制（2024-更新）

为确保数据安全性和业务逻辑正确性，系统对不同媒体平台和账户类型实施精细化的编辑权限控制：

##### 权限控制总表
| 平台类型 | 账户信息(名称/ID) | 部门 | 状态 | 账户配置 | FG信息(DHID/ENV) |
|---------|------------------|------|------|----------|-------------------|
| **Google主MCC** | ❌ 不可编辑 | ❌ 由子账户决定 | ❌ 不可编辑 | ✅ 仅Payment Profile ID | ❌ 完全只读 |
| **Google子MCC** | ✅ 可编辑 | ✅ 可编辑 | ✅ 可编辑 | ❌ 继承主MCC | ❌ 完全只读 |
| **TikTok BC** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ✅ 全部配置项 | ❌ 完全只读 |
| **Facebook** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ❌ 显示"-" | ❌ 完全只读 |
| **Unity** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ❌ 显示"-" | ❌ 完全只读 |
| **AppLovin** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ❌ 显示"-" | ❌ 完全只读 |
| **Moloco** | ❌ 不可编辑 | ✅ 可编辑 | ❌ 不可编辑 | ❌ 显示"-" | ❌ 完全只读 |

##### 详细权限说明

**Google Ads平台**：
- **主MCC账户**：
  - 账户信息：账户名称和ID均不可编辑（保持主账户信息稳定性）
  - 部门：不可编辑，系统自动汇总其所有子账户的部门信息
  - 状态：不可编辑（主账户状态由系统维护）
  - 账户配置：仅允许编辑Payment Profile ID，MCC Type不可更改
  - FG信息：DHID和Environment完全只读
- **子MCC账户**：
  - 账户信息：可编辑账户名称和账户ID
  - 部门：可编辑，支持多选
  - 状态：可编辑（Active/Closed）
  - 账户配置：Payment Profile ID继承主账户不可编辑，MCC Type不可更改
  - FG信息：DHID和Environment完全只读

**TikTok平台（BC账户）**：
- 账户信息：不可编辑（保持API数据一致性）
- 部门：可编辑，支持多选
- 状态：不可编辑（由API数据决定）
- 账户配置：可编辑Industry ID、Business Type、Billing Group ID
- FG信息：DHID和Environment完全只读

**Facebook平台**：
- 账户信息：不可编辑（保持API数据一致性）
- 部门：可编辑，这是唯一可修改的字段
- 状态：不可编辑（由API数据决定）
- 账户配置：列显示为空("-")，无配置项可编辑
- FG信息：DHID和Environment完全只读

**Unity平台**：
- 账户信息：不可编辑（保持数据一致性）
- 部门：可编辑，这是唯一可修改的字段
- 状态：不可编辑
- 账户配置：列显示为空("-")，无配置项可编辑
- FG信息：DHID和Environment完全只读

**AppLovin平台**：
- 账户信息：不可编辑（保持数据一致性）
- 部门：可编辑，这是唯一可修改的字段
- 状态：不可编辑
- 账户配置：列显示为空("-")，无配置项可编辑
- FG信息：DHID和Environment完全只读

**Moloco平台**：
- 账户信息：不可编辑（保持数据一致性）
- 部门：可编辑，这是唯一可修改的字段
- 状态：不可编辑
- 账户配置：列显示为空("-")，无配置项可编辑
- FG信息：DHID和Environment完全只读

##### 业务逻辑说明
1. **继承关系**：Google Ads子账户的Payment Profile ID、DHID、Environment继承主账户
2. **部门汇总**：Google Ads主账户部门为其所有子账户部门的并集
3. **数据一致性**：除Google Ads外的所有平台账户信息和状态保持只读，确保数据一致性
4. **配置管理**：仅TikTok平台支持账户配置编辑，其他平台配置列显示为空
5. **安全性**：FG信息作为系统集成关键字段，全平台禁止手动编辑

#### 1.4 Google子MCC管理功能（2024-更新）

**功能定位**：为Google Ads主MCC账户提供子MCC的创建和管理功能

**触发方式**：
- **入口位置**：每个Google主MCC账户的"操作"列
- **触发按钮**：绿色用户图标按钮，悬停显示"管理子MCC"
- **权限控制**：仅在Google主MCC账户行显示，子MCC账户无此按钮

**添加子MCC对话框功能**：
- **对话框标题**："添加Google子MCC"
- **主MCC信息展示**：
  - 蓝色背景信息卡片显示正在操作的主MCC账户信息
  - 显示主MCC名称和账户ID
  - 信息只读，不可编辑
- **用户输入字段**：
  - **子MCC名称**：必填项，用户自定义输入
  - **子MCC账户ID**：必填项，用户输入唯一账户标识
  - **部门选择**：必填项，多选checkbox形式，支持选择多个部门
- **数据继承规则**：
  - Payment Profile ID：自动继承主MCC的设置
  - DHID和Environment：自动继承主MCC的FG信息
  - 状态：默认设置为"Active"
  - MCC类型：自动设置为"sub"

**表单验证规则**：
- **必填项检查**：子MCC名称、账户ID、部门至少选择一个
- **提交按钮状态**：未满足必填项时按钮禁用，满足条件时启用
- **账户ID唯一性**：系统应检查账户ID的唯一性（实际实现中可添加）

**交互流程**：
1. 用户点击主MCC行的"管理子MCC"按钮
2. 弹出添加子MCC对话框
3. 系统自动显示当前主MCC的账户信息
4. 用户填写子MCC的基本信息和选择部门
5. 点击"确认提交"创建子MCC账户
6. 新建的子MCC账户立即显示在主MCC下方
7. 对话框关闭，表单重置

**视觉设计规范**：
- **模态框**：居中显示，白色背景，圆角设计
- **遮罩层**：黑色半透明背景(bg-black bg-opacity-50)
- **主MCC信息卡片**：蓝色背景(bg-blue-50)，突出显示当前操作的主账户
- **必填项标识**：红色星号(*)标记必填字段
- **按钮设计**：取消按钮为灰色，确认按钮为蓝色，禁用状态降低透明度

#### 1.5 Facebook账户子模块（已移除）
- **功能状态**：Facebook账户子模块已完全移除
- **功能迁移**：Facebook相关功能已整合到"账户权限管理"模块
- **访问方式**：通过侧边栏"权限管理"菜单访问Facebook账户权限信息
- **数据来源**：继续从Facebook API获取BM与Ad Account关系数据

### Google Ads主子账户平铺展示与筛选联动（2024-更新）
- Google Ads账户在列表中主账户和子账户平铺展示，主账户永远在其子账户之上。
- 无论筛选条件如何，若筛选结果包含子账户，则自动展示其主账户（主子账户成对展示）。
- 采用边框包围的视觉设计：每个主账户组用蓝色边框包围，主账户使用浅蓝背景突出显示。
- MCC Type字段采用醒目的彩色标签样式：主MCC为蓝色背景，子MCC为绿色背景。
- 账户配置中不显示"主MCC ID"字段（主账户和子账户均不显示）。
- 其他平台账户展示方式不变。

### 筛选器与搜索功能（2024-更新）
#### 筛选器组件：
1. **状态筛选**：下拉单选（全部、Active、Closed）
2. **媒体类型筛选**：自定义下拉多选组件
   - 支持展开菜单、对号选中标识
   - 选中项以蓝色标签形式显示在输入框内
   - 支持全选/全不选功能
   - 支持点击标签内×删除单个项目
   - 选项：Facebook、Google Ads、TikTok、Applovin、Unity、Moloco
3. **部门筛选**：自定义下拉多选组件（功能同媒体类型筛选器）
   - 选项：010、045、055、060、919

#### 综合搜索功能：
- **搜索范围**：精准关键词匹配以下账户信息字段
  - 基本信息：账户名称、账户ID、公司名称
  - 账户配置：Payment Profile ID、MCC类型
  - 媒体特定字段：Industry ID、Business Type、Billing Group ID
  - FG信息：DHID、Environment
  - 注意：主MCC ID不参与常规搜索，有专门的精准匹配逻辑
- **不参与搜索的字段**：账户状态、媒体类型、部门（这些有专门的筛选器）
- **高亮显示**：匹配的关键词用黄色背景高亮标识
- **搜索逻辑**：
  - 支持子账户ID搜索（如搜索"SUB-001"可找到Gaming Division）
  - 主MCC ID精准匹配逻辑：当搜索关键词与某个主MCC的账户ID精准匹配时，自动展示该主MCC下的所有子账户（子账户仍受其他筛选条件如状态、媒体类型、部门等限制）

#### 筛选器交互流程：
1. **输入阶段**：用户在各筛选器中输入/选择条件，此时不立即应用筛选
2. **手动触发**：点击"筛选"按钮后才应用所有筛选条件
3. **状态反馈**：应用筛选后显示当前生效的筛选条件标签
   - 状态筛选：绿色标签
   - 媒体类型：蓝色标签  
   - 部门筛选：紫色标签
   - 搜索关键词：黄色标签
4. **重置功能**：点击"重置"按钮清空所有筛选条件（包括用户输入和已应用的筛选）

#### 筛选器技术特性：
- **双状态管理**：临时状态（用户输入）+ 应用状态（实际筛选）
- **组合筛选**：所有筛选条件使用AND逻辑组合
- **性能优化**：仅在点击筛选按钮时重新计算筛选结果
- **Google Ads特殊处理**：筛选结果包含子账户时自动补充其主账户（主子账户成对展示）
- **用户体验**：清晰的视觉反馈，避免输入过程中表格内容频繁变化

---

### 2. 账户权限管理

#### 2.1 权限矩阵页面
- 统一展示所有媒体平台的账户权限关系
- 按账户层级展示，每个账户下可展开查看拥有权限的优化师
- 支持多维度筛选（平台、部门、优化师状态等）
- 支持综合搜索（账户名、优化师、容器信息等）
- 所有数据从API直接获取，不支持手动修改

**核心功能**：
- **双层展示结构**：
  - **账户层（外层）**：展示容器与账户的关系信息
    - 媒体平台标识：第一列显示平台类型（Google Ads、Facebook等）
    - 账户信息：账户名称、账户ID（第二列）
    - MCC/BM/BC信息：名称、ID（第三列，不显示角色标签）
    - 关系类型：Owner/Client（Facebook特殊区分，其他平台均为Owner，Client显示为黄色）
    - 账户状态：Active/Closed
    - 部门归属：一个账户只能被一个部门拥有
    - 最后更新时间
    - 拥有权限的优化师数量显示
    - 操作按钮：申请刷新（带确认对话框的二次确认）
  - **优化师层（内层）**：展示具体优化师权限详情
    - 优化师姓名及公司内部邮箱（英文名）
    - 媒体平台邮箱（优化师在对应平台使用的邮箱）
    - 账户权限配置（平台真实角色/任务，不显示模板名称）
    - 优化师状态（Active/Inactive，绿色标签显示）
    - 左右缩进设计，增强视觉层次感
- **展开/收起交互**：
  - 点击账户行的展开图标切换显示/隐藏优化师详情
  - 支持多个账户同时展开
  - 展开状态下账户行背景高亮
- **Facebook特殊处理**：
  - 关系类型支持Owner/Client区分（移除Partner选项）
  - Client关系以黄色标签显示
- **权限关系结构**：容器（MCC/BM/BC）→ 账户 → 优化师三层关系清晰展示

**筛选功能**：
- **平台筛选**：多选下拉组件，支持Google Ads、Facebook、TikTok等
- **部门筛选**：多选下拉组件，支持010、045、055、060、919
- **优化师状态筛选**：多选下拉组件，支持Active、Inactive
- **综合搜索**：关键词匹配账户名、优化师名、容器信息等
- **应用方式**：手动点击"筛选"按钮应用，"重置"按钮清空
- **状态反馈**：显示当前生效的筛选条件标签

**权限显示规范**：
| 平台 | 权限配置 | 显示样式 |
|------|---------|---------|
| Google Ads | STANDARD/ADMIN/READ_ONLY | 蓝色标签显示真实角色 |
| Facebook | ADVERTISE, ANALYZE | 绿色标签显示任务列表 |
| TikTok | BC:STANDARD + AD:ADMIN | 紫色+橙色双标签 |
| Unity/Applovin等 | 平台特定角色 | 灰色标签显示角色 |

#### 2.2 权限审计页面
- 权限异常监控和预警
- 孤立账户检测（有账户无优化师）
- 非活跃优化师权限检测
- 权限冲突检测

**审计项目**：
- **孤立账户**：有账户配置但无优化师分配的情况
- **非活跃优化师**：优化师状态为非活跃但仍有权限分配
- **权限冲突**：同一优化师在不同平台权限级别不一致

**审计结果展示**：
- **问题类型图标**：不同审计类型使用不同颜色图标区分
- **严重程度标识**：error(红色)、warning(黄色)、info(蓝色)
- **统计数据**：显示每种问题的数量统计
- **详细列表**：展开查看具体受影响的账户和优化师
- **批量处理**：支持批量处理相同类型的审计问题

---

### 3. 优化师信息管理

#### 3.1 优化师列表页
- 展示所有优化师的关键信息（姓名、邮箱、部门、媒体权限、状态、上次更新时间等）
- 支持多条件筛选（部门、状态、媒体类型等）
- 支持关键字搜索（姓名、邮箱等）
- 支持分页浏览
- 支持“新增优化师”按钮，弹出新增表单
- 每行支持“编辑”操作，弹出编辑表单
- 支持“申请刷新”操作

**字段说明**：
- 优化师姓名（必填，唯一性校验）
- 工作邮箱（必填，邮箱格式校验）
- 部门（多选标签）
- 媒体权限（可添加多个媒体账号，支持Facebook、TikTok、Google Ads等，每个媒体账号下有账号/ID等字段）
- 培训平台账号邮箱（选填）
- 状态（active/closed）
- 上次更新时间（系统自动记录）

- 新增/编辑弹窗内支持动态添加/删除媒体权限
- 媒体账号信息支持批量导入
- “申请刷新”后有loading和结果反馈
- 优化师不可物理删除，只能“废弃”或“新增”

#### 3.2 新增/编辑优化师弹窗
- 支持新增和编辑优化师信息
- 支持动态添加多个媒体账号权限
- 支持部门多选、标签输入

**校验规则**：
- 姓名、邮箱必填且唯一
- 邮箱格式校验
- 媒体账号信息按类型校验格式

#### 3.3 优化师管理界面升级（2024-更新）

**重大功能调整**：
1. **界面模式转变**：从可编辑模式转为只读展示模式
2. **按钮移除**：删除"批量导入"和"添加优化师"功能按钮
3. **部门字段重构**：单一部门字段分拆为组织部门和权限部门
4. **媒体权限升级**：新增账户管家和Facebook用户ID字段

**列结构重新设计**：
| 原字段 | 新字段 | 变更说明 |
|--------|--------|----------|
| 部门 | 组织部门 + 权限部门 | 分拆为两列，明确区分归属与权限 |
| 媒体权限 | 媒体权限（升级） | 新增账户管家、Facebook用户ID字段 |
| 操作 | 只读提示 | 移除编辑功能，显示只读状态 |

**数据模型升级**：
- **Optimizer接口**：`department` → `organizationDepartment` + `permissionDepartments`
- **MediaPermission接口**：新增 `accountManager` 和 `facebookUserId` 字段

**视觉设计规范**：
- **组织部门**：蓝色标签（bg-blue-100 text-blue-800）
- **权限部门**：绿色标签组（bg-green-100 text-green-800）
- **媒体权限**：卡片式展示，边框包围（border border-gray-200）
- **只读状态**：操作列显示灰色"只读"文字

#### 3.4 优化师管理筛选器系统（2024-新增）

**筛选器组件规范**：
1. **搜索功能**：
   - **搜索范围**：优化师基本信息（姓名、邮箱、内部邮箱、外部邮箱、培训邮箱、职位）+ 媒体权限详情（平台、账户管家、媒体邮箱、Facebook用户ID）
   - **高亮显示**：匹配关键词以黄色背景高亮（bg-yellow-200）
   - **自动展开**：搜索结果包含媒体权限内容时，自动展开相关权限卡片
   - **占位符**："搜索优化师信息、账户管家、邮箱..."

2. **组织部门筛选器**：
   - **组件类型**：MultiSelect多选下拉组件
   - **选项**：010、045、055、060、919
   - **筛选逻辑**：精确匹配优化师的organizationDepartment字段
   - **标签颜色**：蓝色标签（bg-blue-100 text-blue-800）

3. **权限部门筛选器**：
   - **组件类型**：MultiSelect多选下拉组件
   - **选项**：010、045、055、060、919
   - **筛选逻辑**：优化师的permissionDepartments数组包含任一选中部门
   - **标签颜色**：绿色标签（bg-green-100 text-green-800）

4. **状态筛选器**：
   - **组件类型**：单选下拉选择器
   - **选项**：全部、Active、Closed
   - **筛选逻辑**：精确匹配优化师状态
   - **标签颜色**：紫色标签（bg-purple-100 text-purple-800）

5. **媒体类型筛选器**：
   - **组件类型**：MultiSelect多选下拉组件
   - **选项**：Google Ads、Facebook、TikTok、AppLovin、Unity、Moloco
   - **筛选逻辑**：优化师的mediaPermissions数组包含任一选中平台
   - **计数显示**：当筛选生效时，媒体权限列显示格式"媒体权限 (过滤数/总数)"
   - **标签颜色**：橙色标签（bg-orange-100 text-orange-800）

**筛选器交互流程**：
1. **输入阶段**：用户在各筛选器中输入/选择条件，此时不立即应用筛选
2. **手动触发**：点击"筛选"按钮后才应用所有筛选条件
3. **状态反馈**：应用筛选后显示当前生效的筛选条件标签
4. **重置功能**：点击"重置"按钮清空所有筛选条件和搜索内容

**媒体权限过滤显示逻辑**：
- **正常显示**：媒体权限 (3) - 显示所有权限数量
- **筛选显示**：媒体权限 (2/3) - 显示过滤后数量/总数量
- **权限内容**：仅显示符合媒体类型筛选条件的权限详情
- **平台分组**：过滤后的权限按平台重新分组展示

**搜索高亮规范**：
- **高亮样式**：黄色背景 + 圆角（bg-yellow-200 px-1 rounded）
- **高亮范围**：优化师姓名、邮箱、培训邮箱、账户管家、媒体邮箱、Facebook用户ID
- **自动展开**：搜索匹配媒体权限内容时，自动展开折叠的权限卡片
- **忽略大小写**：搜索匹配不区分大小写

**筛选器布局设计**：
- **第一行**：搜索框、组织部门、权限部门、状态（4列网格布局）
- **第二行**：媒体类型、操作按钮（筛选/重置）（3列网格布局）
- **第三行**：当前筛选条件标签（条件性显示）
- **响应式**：移动端自动调整为单列布局

---

### 4. 操作日志
- 展示所有操作日志（时间、操作人、操作类型、模块、详情、状态等）
- 支持按时间、操作人、模块筛选
- 支持关键字搜索
- 支持分页浏览

**字段说明**：
- 时间（自动记录）
- 用户（操作人）
- 模块（媒体信息、优化师信息等）
- 操作类型（新增、编辑、刷新等）
- 详情（如“更新TikTok BCID”）
- 状态（已更新、未更新）

---

## 五、全局交互与体验

### 5.1 顶部导航栏（Header）功能规范
- **系统标题与版本标识**：
  - 主标题："UA媒体账户管家与优化师信息维护"
  - 版本标识：绿色标签显示当前版本号（如"v1.0"）
  - 位置：页面左上角

- **全局搜索功能**：
  - **搜索框位置**：顶部导航栏中央区域
  - **搜索框样式**：带搜索图标的输入框，宽度396px
  - **占位符文本**："搜索媒体平台、优化师或账户..."
  - **功能说明**：全局搜索入口，用于快速查找各模块信息
  - **交互行为**：输入关键词后按回车或点击搜索图标触发搜索

- **全局刷新功能**：
  - **按钮样式**：蓝色背景，包含刷新图标和"申请刷新"文字
  - **加载状态**：点击后图标旋转动画，按钮禁用
  - **刷新范围**：当前活跃模块的数据
  - **反馈机制**：刷新完成后显示成功提示

- **通知系统**：
  - **通知图标**：铃铛图标，位于用户菜单左侧
  - **状态指示**：红色圆点表示有未读通知
  - **功能**：点击显示系统通知和消息

- **用户菜单**：
  - **用户头像**：人员图标
  - **用户身份**：显示"管理员"文字
  - **功能**：点击展开用户操作菜单（退出登录等）

### 5.2 侧边栏导航规范
- **系统标题**：页面顶部显示"媒体信息管理系统"
- **导航菜单**：
  - 媒体信息（Monitor图标）
  - 权限管理（Shield图标）
  - 优化师管理（Users图标）
  - 操作日志（Activity图标）
- **选中状态**：蓝色背景，右侧箭头指示
- **悬停效果**：灰色背景高亮

### 5.3 自定义多选组件技术规范

**MultiSelect组件功能特性**：
- **基础交互**：
  - 点击展开/收起下拉菜单
  - 点击选项前复选框进行选择/取消选择
  - 点击已选标签的×号删除单个选项
- **选中状态显示**：
  - 已选项以蓝色标签形式展示在输入框内
  - 下拉菜单中已选项显示蓝色对勾
- **批量操作**：
  - "全选"按钮：选择所有可选项
  - "清空"按钮：取消所有已选项
- **视觉设计**：
  - 输入框：白色背景，灰色边框，最小高度40px
  - 下拉菜单：白色背景，阴影效果，最大高度240px可滚动
  - 已选标签：蓝色背景(bg-blue-100)，蓝色文字(text-blue-800)
- **外部点击关闭**：点击组件外部区域自动关闭下拉菜单

### 5.4 确认对话框规范

**ConfirmDialog组件规范**：
- **触发场景**：敏感操作前的二次确认（如申请刷新）
- **视觉设计**：
  - 模态框：白色背景，圆角，居中显示
  - 遮罩层：黑色半透明背景(bg-black bg-opacity-50)
  - 警告图标：黄色警告三角形图标
- **内容结构**：
  - 标题：操作名称
  - 描述：详细的操作说明和影响
  - 按钮：取消(灰色) + 确认(蓝色)
- **交互行为**：
  - ESC键关闭
  - 点击遮罩层关闭
  - 点击取消或确认按钮关闭

### 5.5 视觉层次设计规范

**Google Ads主子账户分组视觉**：
- **边框包围**：每个主账户组使用蓝色边框(border-blue-200)包围
- **背景区分**：
  - 主账户：浅蓝色背景(bg-blue-50)，粗体文字
  - 子账户：白色背景(bg-white)，普通文字
- **边框层级**：
  - 组首行：上、左、右边框(border-t-2 border-l-2 border-r-2)
  - 组中间行：左、右边框(border-l-2 border-r-2)
  - 组末行：下、左、右边框(border-b-2 border-l-2 border-r-2)
  - 主账户分割线：底部边框(border-b)
- **组间间距**：各主账户组之间2像素空白行分隔

**权限管理双层结构视觉**：
- **账户层（外层）**：
  - 正常状态：白色背景，hover时灰色背景
  - 展开状态：浅蓝色背景突出显示
- **优化师层（内层）**：
  - 左右缩进：增加padding实现视觉层次
  - 背景色：比外层稍深的背景色
  - 图标标识：用户图标(User)标识优化师行

**标签和状态显示规范**：
- **MCC Type标签**：
  - 主MCC：蓝色背景(bg-blue-500)，白色文字
  - 子MCC：绿色背景(bg-green-500)，白色文字
- **状态标签**：
  - Active：绿色背景(bg-green-100)，绿色文字(text-green-800)
  - Closed：红色背景(bg-red-100)，红色文字(text-red-800)
- **部门标签**：蓝色背景(bg-blue-100)，蓝色文字(text-blue-800)
- **权限标签**：
  - Google Ads：蓝色标签
  - Facebook：绿色标签
  - TikTok：紫色+橙色双标签
  - 其他平台：灰色标签

- 顶部导航栏支持页面切换、刷新、退出登录等操作
- 所有表单均有必填项校验、格式校验、唯一性校验
- 所有异步操作（如刷新、保存）均有loading和结果toast提示
- 支持多端适配（PC、移动端）

---

## 六、字段与校验规则
- 主账户ID/优化师邮箱/姓名：全局唯一
- 部门/标签：支持自定义输入，支持多选
- 媒体账号信息：按媒体类型校验格式（如Google Ads为xxx-xxx-xxx，Facebook为纯数字ID等）
- 状态：active/closed，部分由系统自动维护
- 上次更新时间：系统自动更新时间戳

---

## 七、典型用户场景
1. AM批量导入新媒体账户：通过“新增媒体账户”弹窗，批量填写主账户信息，选择部门，配置账户参数，提交后自动校验并入库。
2. 优化师权限变更：在优化师列表页，筛选目标优化师，编辑其媒体权限，动态添加/删除媒体账号，保存后自动校验并同步。
3. 数据同步与刷新：AM在任意页面点击“申请刷新”，系统自动同步最新数据到数据库，并在操作日志中记录本次操作。
4. 操作追溯：管理员可在操作日志页，按时间/操作人/模块筛选，快速定位历史操作详情。

---

## 八、权限与安全
- 仅AM和中台有操作权限，普通用户只读
- 所有操作均需登录，支持单点登录（SSO）对接
- 敏感操作（如批量导入、刷新）需二次确认

---

## 九、数据同步与备份
- 支持每日定时自动同步
- 支持手动触发同步
- 所有数据变更均有备份和恢复机制

---

## 十、技术实现规范

### 10.1 前端技术栈
- **框架**：React 18 + TypeScript
- **构建工具**：Vite
- **样式方案**：Tailwind CSS
- **图标库**：Lucide React
- **状态管理**：React Hooks (useState, useMemo, useEffect等)

### 10.2 组件架构规范
- **布局组件**：
  - `App.tsx`：主应用容器，管理模块切换和全局状态
  - `Header.tsx`：顶部导航栏组件
  - `Sidebar.tsx`：侧边栏导航组件
- **功能模块组件**：
  - `MediaModule.tsx`：媒体账户管理主组件
  - `PermissionModule.tsx`：权限管理主组件
  - `OptimizerModule.tsx`：优化师管理主组件
  - `OperationLogs.tsx`：操作日志组件
- **通用组件**：
  - `MultiSelect.tsx`：自定义多选下拉组件
  - `ConfirmDialog.tsx`：确认对话框组件

### 10.3 数据模型规范
- **接口定义**：所有数据类型定义在`src/types/index.ts`中
- **核心数据模型**：
  - `MediaAccount`：媒体账户信息
  - `PermissionRelation`：权限关系数据
  - `Optimizer`：优化师信息
  - `OperationLog`：操作日志
- **数据继承规则**：
  - Google Ads子账户继承主账户的Payment Profile ID、DHID、Environment
  - Google Ads主账户部门为所有子账户部门的并集

### 10.4 状态管理规范
- **双状态模式**：筛选器使用临时状态(tempFilters)和应用状态(appliedFilters)分离
- **展开状态**：使用Set数据结构管理多个可展开项的状态
- **加载状态**：所有异步操作都有对应的loading状态管理
- **错误处理**：统一的错误状态管理和用户反馈机制

### 10.5 样式规范
- **颜色体系**：
  - 主色调：蓝色系(blue-500, blue-600等)
  - 成功色：绿色系(green-100, green-800等)
  - 警告色：黄色系(yellow-100, yellow-800等)
  - 错误色：红色系(red-100, red-800等)
- **间距规范**：使用Tailwind的spacing scale (1-6像素为单位)
- **圆角规范**：统一使用rounded-lg (8px)作为标准圆角
- **阴影规范**：卡片使用shadow-sm，下拉菜单使用shadow-lg

### 10.6 响应式设计
- **断点设置**：遵循Tailwind CSS断点规范
- **布局适配**：侧边栏在移动端可收起，表格支持横向滚动
- **字体缩放**：支持不同屏幕尺寸的字体大小适配

---

## 十一、附录
- 页面原型与交互可参考：[https://lustrous-daffodil-e7d54b.netlify.app/](https://lustrous-daffodil-e7d54b.netlify.app/)
- 字段、交互、校验规则如有变动，以产品实际页面为准
